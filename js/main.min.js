window.addEventListener('DOMContentLoaded', () => {

    //меню scroll + мобильное меню
    const fixedNav = document.querySelector('.header__scroll-nav');
    const headerNavWrapper = document.querySelector('.header__nav-wrapper');
    const heightHeader = window.getComputedStyle(headerNavWrapper).height;

    window.addEventListener('scroll', function () {

        if (pageYOffset > heightHeader.slice(0, -2)) {
            fixedNav.classList.add('header__scroll-nav--active');
        } else if (pageYOffset < heightHeader.slice(0, -2)) {
            fixedNav.classList.remove('header__scroll-nav--active');
        }
    });

    fixedNav.addEventListener('click', (e) => {
        fixedNav.classList.toggle('open_menu');
        document.querySelector('.header__nav-menu').classList.toggle('header__nav-menu--active');
        document.querySelector('.scroll-btn').classList.toggle('scroll-btn--active');
    });


    //слайдер


    const slides = document.querySelectorAll('.header__slide');
    const dots = document.querySelectorAll('.header__slide-dot');

    let currentSlide = 0;
    setInterval(function nextSlide() {
        slides[currentSlide].className = 'header__slide';
        currentSlide = (currentSlide + 1) % slides.length;
        slides[currentSlide].className = 'header__slide header__slide--active';
        //удалить активный класс со всех элементов dots
        dots.forEach(item => {
            item.classList.remove('header__slide-dot--active');
        });
        //добавить активный класс dots активному элементу
        dots[currentSlide].classList.add('header__slide-dot--active');

    }, 4000);
    for (let i = currentSlide; i < slides.length; i++) {

        dots[i].addEventListener('click', (e) => {
            slides.forEach(item => {
                item.classList.remove('header__slide--active');
            });
            dots.forEach(item => {
                item.classList.remove('header__slide-dot--active');
            });
            dots[i].classList.add('header__slide-dot--active');
            slides[i].classList.add('header__slide--active');
        });

    }



    //аккордеон блока prices
    const accordionLink = document.querySelectorAll('.accordion__link');
    const listsBox = document.querySelectorAll('.lists__box');
    const pricesMenu = document.querySelector('.prices__menu');

    function hideTabContent() {
        listsBox.forEach(item => {
            item.classList.add('lists__hide');
            item.classList.remove('lists__show', 'lists__fade');
        });

        accordionLink.forEach(item => {
            item.classList.remove('accordion__link--active');
        });
    }

    function showTabContent(i = 0) {
        listsBox[i].classList.add('lists__show', 'lists__fade');
        listsBox[i].classList.remove('lists__hide');
        accordionLink[i].classList.add('accordion__link--active');
    }

    hideTabContent();
    showTabContent();

    pricesMenu.addEventListener('click', (event) => {
        const target = event.target;

        if (target && target.classList.contains('accordion__link')) {
            accordionLink.forEach((item, i) => {
                if (target == item) {
                    hideTabContent();
                    showTabContent(i);
                }
            });
        }
    });



    // модальные окна
    const modalWrapper = document.querySelector('.modal__wrapper'),
        modalSlider = document.querySelectorAll('.modal__slider'),
        headerSlideBtn = document.querySelectorAll('.header__slide-btn'),
        servicesLink = document.querySelectorAll('.services__link'),
        servicesItems = document.querySelectorAll('.modal__services-item');
        
        openModal(modalSlider, headerSlideBtn, modalWrapper);
        openModal(servicesItems, servicesLink, modalWrapper);


    function openModal(modalWindow, clickBtn, wrapper) {
        for (let i = 0; i < clickBtn.length; i++) {

            clickBtn[i].addEventListener('click', (e) => {
                e.preventDefault();
                modalWrapper.style.display = "block";
                modalWindow[i].style.display = "block";
            });
            wrapper.addEventListener('click', (e) => {
                wrapper.style.display = "none";
                modalWindow[i].style.display = "none";
            });
        }
    }






});